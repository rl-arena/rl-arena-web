name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main # main ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œë§ˆë‹¤ ì‹¤í–‰

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v3

      - name: Install dependencies ğŸ”§
        run: npm install

      - name: Build project ğŸ—ï¸
        run: npm run build
        env:
          # VITE_APP_BASE_URL í™˜ê²½ ë³€ìˆ˜ê°€ ìˆë‹¤ë©´ ì—¬ê¸°ì— ì„¤ì •
          # VITEì˜ base ì„¤ì •ì€ vite.config.jsì—ì„œ ì´ë¯¸ í–ˆìœ¼ë¯€ë¡œ ìƒëµ ê°€ëŠ¥
          VITE_BASE_URL: /rl-arena-web/

      - name: Deploy to GitHub Pages ğŸš€
        uses: peaceiris/actions-gh-pages@v3
        with:
          # GitHub Pagesì— ë°°í¬í•  í´ë” (Viteì˜ ê¸°ë³¸ ì¶œë ¥ í´ë”)
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist
          # ì„œë¸Œ ê²½ë¡œ(subpath) ë°°í¬ë¥¼ ìœ„í•´ ë°˜ë“œì‹œ í•„ìš”
          force_orphan: true